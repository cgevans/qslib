# SPDX-FileCopyrightText: 2021-2022 Constantine Evans <const@costi.eu>
#
# SPDX-License-Identifier: AGPL-3.0-only

#[build-system]
#requires = ["pdm-pep517"]
#build-backend = "pdm.pep517.api"

[build-system]
requires = ["setuptools>=46.1.0", "setuptools_scm[toml]>=5", "wheel"]
build-backend = "setuptools.build_meta"

[tool.setuptools_scm]
version_scheme = "no-guess-dev"

[tool.pdm]
version = {use_scm = true}

[tool.isort]
profile = "black"

[project]
name = "qslib"
requires-python = ">=3.9"
description = "Library for communicating with and using the QuantStudio qPCR machine, intended for non-qPCR uses."
license = {file = "LICENSE.txt"}
readme = "README.md"
authors = [{name="Constantine Evans", email="const@costi.eu"}]
classifiers = [
    "Development Status :: 4 - Beta",
    "Programming Language :: Python",
    "Intended Audience :: Science/Research",
    "License :: OSI Approved :: GNU General Public License v3 (GPLv3)",
    "Natural Language :: English",
    "Topic :: Scientific/Engineering",
    "Topic :: Scientific/Engineering :: Chemistry",
    "Topic :: Scientific/Engineering :: Physics",
    "Typing :: Typed",
    "Programming Language :: Python :: 3.9",
    "Framework :: Matplotlib",
    "Framework :: Jupyter" ]

dynamic = ["version"]

dependencies = [
"pandas >= 1",
"numpy >= 1",
"tabulate >= 0.8",
"pyparsing >= 3",
"typeguard >= 2",
"nest_asyncio >= 1.5",
"click >=8.0,<9.0",
"toml",
"pint",
"attrs",
"matplotlib",
"markdown",
"dacite"
]

[project.optional-dependencies]
# Add here additional requirements for extra features, to install with:
# `pip install qslib[PDF]` like:
# PDF = ReportLab; RXP
monitor = [
    "matrix-nio",
    "influxdb_client",
    "toml",
    "lxml"
    ]
docs = [
    "myst_parser",
    "influxdb_client",
    "toml",
    "lxml"
    ]
# Add here test requirements (semicolon/line-separated)
testing = [
    "setuptools",
    "pytest",
    "pytest-cov",
    "pytest-asyncio"
    ]

[project.urls]
homepage = "https://github.com/cgevans/qslib/"
documentation = "https://qslib.readthedocs.org/"
source = "https://github.com/cgevans/qslib/"
changelog = "https://github.com/cgevans/qslib/blob/main/CHANGELOG.md"
tracker = "https://github.com/cgevans/qslib/issues"
download = "https://github.com/cgevans/qslib/releases"

[project.scripts]
qs-monitor = "qslib.monitor_cli:run"
qslib = "qslib.cli:cli"

[tool.pytest.ini_options]
addopts = "--cov qslib --cov-report term-missing --verbose"
norecursedirs = [
    "dist",
    "build",
    ".tox"]
testpaths = ["tests"]


[tool.mypy]
python_version = "3.10"
# warn_return_any = true
warn_unused_configs = true
ignore_missing_imports = true
